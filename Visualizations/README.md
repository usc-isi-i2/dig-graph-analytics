
### Steps to run [Connected Components code](https://github.com/linhongseba/ConnectedComponent)

### Step1:
Run [generate-edges.py](https://github.com/usc-isi-i2/dig-graph-analytics/blob/master/Visualizations/util-scripts/generate-edges.py). This creates edges from Seller input file. 

```
spark-submit generate-edges.py Seller-seq sequence output

Arguments:
input is seller file
type is sequence or text
output file
```
Output will look like:

```
http://dig.isi.edu/ht/data/seller/0C4766962B2CD28F6EBF6BA1D727F923D0AA1331	http://dig.isi.edu/ht/data/phone/1-6478770951
http://dig.isi.edu/ht/data/seller/759C158B404B9DEA7E41F7E025B2672530A2C0D7	http://dig.isi.edu/ht/data/phone/1-4143648517

```



###Step2: 

For this algorithm, all the nodes have to be integers. So first convert your string type nodes to integer nodes. I have
a [str_to_int.py](https://github.com/usc-isi-i2/dig-graph-analytics/blob/master/Visualizations/util-scripts/str_to_int.py) script for that. 
The [str_to_int](https://github.com/usc-isi-i2/dig-graph-analytics/blob/master/Visualizations/util-scripts/str_to_int.py) script assumes your data is in the format below:

```
http://dig.isi.edu/ht/data/seller/0C4766962B2CD28F6EBF6BA1D727F923D0AA1331	http://dig.isi.edu/ht/data/phone/1-6478770951
http://dig.isi.edu/ht/data/seller/759C158B404B9DEA7E41F7E025B2672530A2C0D7	http://dig.isi.edu/ht/data/phone/1-4143648517
```
with '\t' as seperator

Now, run the str_to_int.py
```
python str_to_int.py <inputFile> <outputFile>
```
output would be:
```
0 1
1 2 
3 4   
```
space as separator
This script will also create a inputFile_rev_dict.txt file with integer to string mapping, which can be used for postprocessing.

###Step 2:

Run [edge2standard.cpp](https://github.com/linhongseba/MaximumClique/blob/master/util/edge2standard.cpp) which creates the file with the encoding format required for Connectedcomponents code

```
g++ edge2standard.cpp -o edge
./edge <inputfile> 
```
This will generate a new file with inputfile_new.txt

### Step 3:
Run [Connected-Comp](https://github.com/linhongseba/ConnectedComponent/blob/master/Connected_Comp/Graphstat.cpp) now on 
inputfile_new.txt
```
g++ Graphstat.cpp -o conn-comp
./conn-comp <inputfile_new.txt> <outputfile>
```
outputfile will be in the following format
```
Node-Number Connected-Comp-Num
0             3
1             4
2             3
3             4
```


### Step 4:
Postprocessing:
```
python postprocess.py <inputFile> <_rev-dict.txt> -1 <outputFile>
```
##### Arguments description:
```
inputFile is the connected components output
_rev-dict.txt is the file generated by str_to_int.py
-1 is the argument that tells which nodes to write in output file. If it's "seller" only seller nodes will be there. For now
give -1.
```





